# 大学生在线选课系统产品需求文档 (PRD)

## 目标和背景上下文

### 目标

- 提供高效、稳定、易用的在线选课平台，提升学生选课体验
- 实现管理员与用户的权限分离，确保系统安全和数据完整性
- 支持至少5张数据库表的完整CRUD操作，满足业务需求
- 在选课高峰期支持1000+并发用户，系统可用性达到99.5%
- 减少人工教务管理工作量80%以上，提高管理效率

### 背景上下文

当前高校选课流程面临效率低下、信息不透明、管理复杂等多重挑战。传统选课方式需要学生排队或登录多个系统，选课高峰期系统经常崩溃，管理员处理选课数据工作繁琐。大学生在线选课系统通过React + TypeScript前端框架和Node.js + Express后端架构，配合MySQL数据库，提供一体化的数字化解决方案。系统不仅解决现有痛点，还为未来功能扩展奠定技术基础。

### 变更日志

| 日期 | 版本 | 描述 | 作者 |
|------|------|------|------|
| 2025-12-15 | v1.0 | 初始PRD版本 | John (PM) |

## 需求

### 功能性需求

FR1: 用户注册和登录系统
- 学生可以通过学号、姓名、密码进行注册
- 管理员可以通过预设账号登录
- 支持JWT令牌身份认证和会话管理
- 提供密码找回和重置功能

FR2: 基于角色的权限管理系统
- 实现学生和管理员两种角色
- 学生只能管理自己的选课数据和个人信息
- 管理员可以管理所有用户数据和业务数据
- 权限验证在所有关键操作中生效

FR3: 课程信息管理
- 管理员可以创建、编辑、删除课程信息
- 课程信息包括：课程代码、名称、学分、授课教师、上课时间、地点、容量限制、先修要求
- 支持课程信息的批量导入和导出
- 课程信息实时更新，学生可以看到最新信息

FR4: 在线选课功能
- 学生可以浏览所有可选课程列表
- 学生可以查看课程详细信息
- 学生可以进行选课和退课操作
- 系统自动检测选课冲突（时间冲突、先修要求未满足等）
- 实时显示课程选课人数和剩余名额

FR5: 用户数据管理
- 学生可以查看和编辑个人基本信息
- 学生可以查看自己的选课记录和课程表
- 管理员可以查看所有学生列表
- 管理员可以编辑学生信息（学号、姓名、班级等）
- 管理员可以重置学生密码

FR6: 数据统计和报表
- 实时显示选课统计信息（各课程选课人数、总体选课进度）
- 生成选课报表（按课程、按学生、按时间维度）
- 导出Excel格式报表
- 提供数据可视化图表

### 非功能性需求

NFR1: 性能要求
- 页面加载时间小于3秒
- API响应时间小于500毫秒
- 支持选课高峰期1000+并发用户
- 系统可用性达到99.5%

NFR2: 安全性要求
- 用户密码使用Bcrypt加密存储
- 所有敏感数据传输使用HTTPS
- 实施SQL注入、XSS、CSRF防护
- 定期进行安全审计和漏洞扫描

NFR3: 可用性要求
- 系统界面简洁直观，符合用户操作习惯
- 提供清晰的操作指引和错误提示
- 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 响应式设计，支持不同屏幕尺寸

NFR4: 可维护性要求
- 代码结构清晰，遵循最佳实践
- 提供完整的API文档和用户手册
- 实施日志记录和错误监控
- 支持系统热更新和配置管理

NFR5: 数据完整性要求
- 确保选课数据的一致性和准确性
- 实施事务管理防止数据不一致
- 定期数据备份和恢复测试
- 数据操作审计日志记录

## 用户界面设计目标

### 整体UX愿景

创建一个简洁、高效、用户友好的在线选课体验。界面设计以功能为核心，减少用户操作步骤，提供清晰的视觉反馈。采用现代化的设计语言，确保界面直观易用，特别是在选课高峰期的高压环境下也能保持良好的用户体验。

### 关键交互范式

- **卡片式布局**: 课程信息以卡片形式展示，包含关键信息一目了然
- **模态弹窗**: 详细信息查看和操作确认使用模态弹窗，避免页面跳转
- **实时搜索**: 支持课程名称、教师、时间等多维度实时搜索过滤
- **拖拽操作**: 课程表视图支持拖拽调整选课方案（未来功能）
- **批量操作**: 管理员界面支持批量选择和操作
- **进度指示**: 长时间操作显示进度条和状态提示

### 核心屏幕和视图

- **登录/注册页面**: 用户身份认证入口
- **学生仪表板**: 显示选课进度、待办事项、快速操作入口
- **课程列表页**: 课程浏览、搜索、筛选主要界面
- **课程详情页**: 完整课程信息展示和选课操作
- **我的课程表**: 时间表形式展示已选课程
- **个人中心**: 个人信息管理和密码修改
- **管理员仪表板**: 系统概览和快速管理入口
- **课程管理页面**: 管理员课程CRUD操作界面
- **用户管理页面**: 管理员用户管理界面
- **数据统计页面**: 选课数据可视化展示

### 可访问性: WCAG AA

系统将遵循WCAG AA标准，确保所有用户包括残障人士都能正常使用：
- 支持键盘导航和屏幕阅读器
- 提供足够的色彩对比度
- 图片和图标提供替代文本
- 表单字段正确标注

### 品牌化

采用现代化、教育主题的设计风格：
- **主色调**: 蓝色系（专业、可信赖）
- **辅助色**: 绿色（成功）、橙色（警告）
- **字体**: 系统默认字体确保跨平台一致性
- **图标**: 使用一致的图标库，确保视觉统一性

### 目标设备和平台: Web Responsive

响应式Web设计，支持：
- 桌面端（1920x1080及以上）
- 笔记本（1366x768及以上）
- 平板（768px及以上）
- 手机（320px及以上）

## 技术假设

### 仓库结构: Monorepo

采用单仓库结构管理前后端代码：
- `/frontend`: React + TypeScript前端代码
- `/backend`: Node.js + Express后端代码
- `/docs`: 项目文档
- `/scripts`: 构建和部署脚本
- 共享配置文件在根目录

### 服务架构

采用**前后端分离的分层架构**：
- **前端**: React SPA，组件化开发，状态管理使用Context API或Redux Toolkit
- **后端**: RESTful API设计，Controller-Service-Repository分层
- **数据库**: MySQL主数据库，Redis缓存
- **认证**: JWT令牌 + Refresh Token机制
- **文件存储**: 本地文件系统或云存储服务

### 测试要求: Unit + Integration

实施完整的测试策略：
- **单元测试**: Jest + Testing Library（前端），Jest + Supertest（后端）
- **集成测试**: API接口测试，数据库操作测试
- **端到端测试**: Cypress自动化测试
- **性能测试**: 选课高峰期并发测试
- **安全测试**: 漏洞扫描和渗透测试

### 额外技术假设和请求

- **前端框架**: React 18 + TypeScript + Vite
- **UI组件库**: Ant Design或Material-UI
- **状态管理**: Redux Toolkit + RTK Query
- **路由**: React Router v6
- **表单处理**: React Hook Form + Yup验证
- **图表库**: ECharts或Chart.js用于数据可视化
- **后端框架**: Express.js + TypeScript
- **ORM**: TypeORM或Prisma
- **验证**: Joi或class-validator
- **日志**: Winston
- **API文档**: Swagger/OpenAPI
- **容器化**: Docker + Docker Compose
- **部署**: Nginx + PM2

## 史诗列表

Epic 1: 项目基础架构与核心功能: 建立项目开发环境、用户认证系统和基础UI框架，实现用户注册登录和权限管理功能。

Epic 2: 课程管理系统: 创建完整的课程数据模型和管理界面，实现管理员对课程信息的CRUD操作。

Epic 3: 在线选课核心功能: 开发学生选课流程，包括课程浏览、搜索、选课、退课和冲突检测功能。

Epic 4: 用户数据与管理后台: 完善用户个人中心和学生管理功能，提供管理员用户管理界面。

Epic 5: 数据统计与报表系统: 实现选课数据统计、可视化展示和报表导出功能。

## Epic 1 项目基础架构与核心功能

建立完整的项目基础架构，包括开发环境配置、数据库设计、用户认证系统和基础前端框架。此史诗将创建技术基础设施，同时交付可用的用户注册登录功能，为后续开发奠定坚实基础。

### Story 1.1 项目初始化和基础配置

**作为** 开发团队，
**我希望** 建立完整的项目结构和开发环境，
**以便** 开始功能开发和团队协作。

**验收标准**

1. 创建Monorepo项目结构，包含前端和后端目录
2. 配置TypeScript编译环境和代码规范（ESLint + Prettier）
3. 设置Git版本控制和分支策略
4. 配置开发环境热重载和调试工具
5. 创建基础的Docker配置文件
6. 建立CI/CD流水线基础配置

### Story 1.2 数据库设计和初始化

**作为** 开发团队，
**我希望** 设计和初始化数据库结构，
**以便** 支持用户管理、课程管理和选课功能。

**验收标准**

1. 设计并创建5张核心数据表：用户表、课程表、选课记录表、权限表、管理员表
2. 建立表之间的关联关系和索引
3. 创建数据库迁移脚本
4. 编写种子数据初始化脚本
5. 配置数据库连接池和ORM框架
6. 实施基础的数据验证约束

### Story 1.3 后端API基础架构

**作为** 后端开发人员，
**我希望** 建立RESTful API基础架构，
**以便** 提供统一的API接口和中间件支持。

**验收标准**

1. 搭建Express.js服务器和路由结构
2. 实施CORS配置和安全中间件
3. 创建统一的错误处理和日志记录机制
4. 实现API版本控制策略
5. 配置环境变量管理
6. 建立Swagger API文档框架

### Story 1.4 前端基础框架和路由

**作为** 前端开发人员，
**我希望** 建立React应用基础框架，
**以便** 支持多页面导航和状态管理。

**验收标准**

1. 创建React + TypeScript项目结构
2. 配置React Router路由系统
3. 集成UI组件库和主题系统
4. 建立全局状态管理（Redux Toolkit）
5. 创建基础布局组件（Header、Sidebar、Footer）
6. 实现响应式设计基础

### Story 1.5 用户注册功能

**作为** 学生用户，
**我希望** 能够注册新账户，
**以便** 使用在线选课系统。

**验收标准**

1. 提供学生注册表单（学号、姓名、邮箱、密码）
2. 实现前端表单验证和错误提示
3. 后端验证学号唯一性和数据格式
4. 密码使用Bcrypt加密存储
5. 注册成功后自动跳转到登录页面
6. 提供注册成功/失败的明确反馈

### Story 1.6 用户登录和身份认证

**作为** 系统用户，
**我希望** 能够安全登录系统，
**以便** 访问我的个人选课信息。

**验收标准**

1. 提供登录表单（学号/邮箱 + 密码）
2. 实现JWT令牌生成和验证
3. 支持记住登录状态功能
4. 实现登录失败次数限制和锁定机制
5. 前端路由守卫保护需要认证的页面
6. 提供安全登出功能

### Story 1.7 基于角色的权限控制

**作为** 系统管理员，
**我希望** 实现用户角色权限管理，
**以便** 确保系统安全和数据访问控制。

**验收标准**

1. 设计用户角色数据模型（学生、管理员）
2. 实现基于角色的API访问控制
3. 前端根据用户角色显示不同菜单和功能
4. 创建权限验证中间件
5. 实现细粒度的操作权限控制
6. 支持权限动态配置和扩展

## Epic 2 课程管理系统

创建完整的课程数据模型和管理界面，使管理员能够高效地管理课程信息。此史诗将建立系统的核心业务实体，为选课功能提供数据基础。

### Story 2.1 课程数据模型和CRUD API

**作为** 系统架构师，
**我希望** 设计课程数据模型和API接口，
**以便** 支持完整的课程管理功能。

**验收标准**

1. 设计课程表结构（课程代码、名称、学分、教师、时间、地点等）
2. 实现课程CRUD RESTful API
3. 添加课程数据验证规则
4. 实现课程分页查询和搜索功能
5. 支持课程批量操作API
6. 建立课程相关的数据关系和约束

### Story 2.2 课程列表和搜索界面

**作为** 学生用户，
**我希望** 能够浏览和搜索课程信息，
**以便** 了解可选课程并做出选课决策。

**验收标准**

1. 创建课程列表页面，展示课程卡片视图
2. 实现多维度搜索功能（课程名称、教师、时间等）
3. 提供课程筛选和排序选项
4. 显示课程关键信息（名称、教师、时间、剩余名额）
5. 支持课程收藏和对比功能
6. 实现响应式布局适配不同设备

### Story 2.3 课程详情页面

**作为** 学生用户，
**我希望** 能够查看课程的详细信息，
**以便** 全面了解课程内容并做出选课决定。

**验收标准**

1. 创建课程详情页面，展示完整课程信息
2. 显示课程描述、先修要求、考核方式
3. 展示教师信息和历史评价
4. 显示选课状态和剩余名额
5. 提供选课/退课操作按钮
6. 展示相关课程推荐

### Story 2.4 管理员课程编辑界面

**作为** 系统管理员，
**我希望** 能够编辑和管理课程信息，
**以便** 维护准确的课程数据库。

**验收标准**

1. 创建管理员课程管理页面
2. 提供课程创建和编辑表单
3. 实现表单验证和数据保存功能
4. 支持课程删除和批量操作
5. 提供课程导入/导出功能
6. 实现操作历史记录和撤销功能

## Epic 3 在线选课核心功能

开发完整的在线选课流程，包括选课冲突检测、名额管理和实时状态更新。这是系统的核心功能，直接影响用户体验。

### Story 3.1 选课业务逻辑实现

**作为** 系统架构师，
**我希望** 实现选课核心业务逻辑，
**以便** 支持可靠的选课操作和数据一致性。

**验收标准**

1. 实现选课API接口，包含冲突检测逻辑
2. 添加选课名额限制和并发控制
3. 实现选课事务管理确保数据一致性
4. 创建选课历史记录和状态跟踪
5. 实现退课功能和相关规则
6. 添加选课时间段控制

### Story 3.2 选课冲突检测机制

**作为** 学生用户，
**我希望** 系统能够检测选课冲突，
**以便** 避免时间冲突和不符合要求的选课。

**验收标准**

1. 实现时间冲突检测算法
2. 检查先修课程要求是否满足
3. 验证选课名额是否已满
4. 提供冲突详情和解决建议
5. 在前端实时显示冲突警告
6. 支持智能选课建议

### Story 3.3 实时选课状态更新

**作为** 学生用户，
**我希望** 能够实时查看课程选课状态，
**以便** 及时了解选课情况并做出决策。

**验收标准**

1. 实现WebSocket实时通信
2. 课程剩余名额实时更新
3. 选课成功/失败的即时反馈
4. 选课队列状态显示
5. 系统负载和状态监控
6. 优雅处理网络中断和重连

### Story 3.4 我的课程表界面

**作为** 学生用户，
**我希望** 能够查看我的课程表，
**以便** 直观了解我的课程安排。

**验收标准**

1. 创建时间表形式的课程表视图
2. 按周显示课程安排
3. 支持课程表导出功能
4. 提供课程表打印友好视图
5. 显示课程变更提醒
6. 支持课程表分享功能

## Epic 4 用户数据与管理后台

完善用户个人中心功能和管理员用户管理界面，提供完整的用户数据管理能力。

### Story 4.1 学生个人中心

**作为** 学生用户，
**我希望** 能够管理我的个人信息，
**以便** 保持账户信息的准确性。

**验收标准**

1. 创建个人中心页面，显示基本信息
2. 支持编辑个人资料（姓名、邮箱等）
3. 提供密码修改功能
4. 显示我的选课历史记录
5. 展示我的课程表和学习进度
6. 提供账户注销和数据导出功能

### Story 4.2 管理员用户管理界面

**作为** 系统管理员，
**我希望** 能够管理系统用户，
**以便** 维护用户数据和系统安全。

**验收标准**

1. 创建用户管理页面，显示用户列表
2. 支持用户搜索和筛选功能
3. 提供用户信息编辑功能
4. 实现用户状态管理（启用/禁用）
5. 支持用户批量操作
6. 提供用户操作日志查看

### Story 4.3 密码重置和账户管理

**作为** 系统管理员，
**我希望** 能够重置用户密码，
**以便** 帮助用户解决登录问题。

**验收标准**

1. 实现管理员密码重置功能
2. 提供临时密码生成机制
3. 支持账户锁定和解锁
4. 实现强制密码重置
5. 提供账户安全设置
6. 记录密码操作审计日志

## Epic 5 数据统计与报表系统

实现选课数据统计、可视化展示和报表导出功能，为管理员提供数据分析和决策支持。

### Story 5.1 选课数据统计API

**作为** 后端开发人员，
**我希望** 提供数据统计API，
**以便** 支持前端数据可视化和报表生成。

**验收标准**

1. 实现选课统计数据查询API
2. 提供多维度数据聚合功能
3. 支持实时数据统计和缓存
4. 实现数据导出格式化
5. 添加数据统计性能优化
6. 提供数据统计API文档

### Story 5.2 数据可视化仪表板

**作为** 系统管理员，
**我希望** 查看选课数据可视化图表，
**以便** 了解选课情况和趋势。

**验收标准**

1. 创建管理员仪表板页面
2. 实现关键指标卡片展示
3. 提供选课趋势图表
4. 显示课程热门程度排行
5. 实现学院/专业选课分布图
6. 支持图表交互和筛选

### Story 5.3 报表生成和导出功能

**作为** 系统管理员，
**我希望** 能够生成和导出各类报表，
**以便** 进行数据分析和归档。

**验收标准**

1. 提供多种报表模板选择
2. 支持Excel、PDF格式导出
3. 实现自定义报表生成
4. 提供报表定时生成功能
5. 支持报表历史记录查看
6. 实现报表分享和邮件发送

## 检查表结果报告

（此部分将在运行PM检查表后填充）

## 下一步

### UX专家提示

请使用此PRD文档启动UX设计模式，重点关注用户体验设计、界面原型和交互流程的创建。确保设计符合用户需求和技术要求。

### 架构师提示

请使用此PRD文档启动架构设计模式，基于文档中的技术假设和需求，创建详细的技术架构、数据库设计和API规范。确保架构满足性能、安全和可扩展性要求。