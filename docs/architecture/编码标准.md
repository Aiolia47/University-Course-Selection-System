# 编码标准

## 关键的全栈规则

- **类型共享:** 始终在packages/shared中定义类型并从那里导入
- **API调用:** 永远不要直接进行HTTP调用 - 使用服务层
- **环境变量:** 只通过配置对象访问，永远不要直接访问process.env
- **错误处理:** 所有API路由必须使用标准错误处理器
- **状态更新:** 永远不要直接改变状态 - 使用适当的状态管理模式
- **数据库查询:** 使用TypeORM而不是原生SQL查询（性能关键场景除外）
- **认证检查:** 所有受保护的API端点都必须有认证中间件
- **输入验证:** 所有用户输入都必须在控制器层进行验证
- **日志记录:** 所有重要操作都必须记录到审计日志
- **事务管理:** 涉及多个数据表的操作必须使用数据库事务

## 命名约定

| 元素 | 前端 | 后端 | 示例 |
|------|------|------|------|
| 组件 | PascalCase | - | `UserProfile.tsx` |
| 钩子 | camelCase with 'use' | - | `useAuth.ts` |
| API路由 | - | kebab-case | `/api/user-profile` |
| 数据库表 | - | snake_case | `user_profiles` |
| 文件名 | PascalCase (组件) | camelCase | `userService.ts` |
| 变量名 | camelCase | camelCase | `userName` |
| 常量 | UPPER_SNAKE_CASE | UPPER_SNAKE_CASE | `API_BASE_URL` |
| 类型/接口 | PascalCase | PascalCase | `CourseSelection` |
| 枚举 | PascalCase | PascalCase | `UserRole` |
