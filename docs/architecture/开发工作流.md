# 开发工作流

## 本地开发设置

### 前提条件

```bash
# 检查Node.js版本
node --version  # 应该 >= 18.0.0

# 检查npm版本
npm --version   # 应该 >= 8.0.0

# 检查Docker版本
docker --version

# 检查MySQL版本
mysql --version

# 检查Redis版本
redis-cli --version
```

### 初始设置

```bash
# 克隆仓库
git clone <repository-url>
cd course-selection-system

# 安装依赖
npm install

# 设置环境变量
cp .env.example .env.local

# 启动数据库服务
docker-compose up -d mysql redis

# 运行数据库迁移
npm run db:migrate

# 插入种子数据
npm run db:seed
```

### 开发命令

```bash
# 启动所有服务
npm run dev

# 启动前端服务
npm run dev:web

# 启动后端服务
npm run dev:api

# 运行测试
npm run test

# 运行测试并监听变化
npm run test:watch

# 运行代码检查
npm run lint

# 运行类型检查
npm run type-check

# 构建项目
npm run build
```

## 环境配置

### 必需的环境变量

```bash
# 前端环境变量 (.env.local)
REACT_APP_API_URL=http://localhost:3001/v1
REACT_APP_ENVIRONMENT=development
REACT_APP_VERSION=1.0.0

# 后端环境变量 (.env)
NODE_ENV=development
PORT=3001
API_VERSION=v1

# 数据库配置
DB_HOST=localhost
DB_PORT=3306
DB_NAME=course_selection
DB_USER=root
DB_PASSWORD=password
DATABASE_URL=mysql://root:password@localhost:3306/course_selection

# Redis配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# JWT配置
JWT_SECRET=your-super-secret-jwt-key
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# 文件存储配置
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760

# 邮件配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# 日志配置
LOG_LEVEL=debug
LOG_FILE=./logs/app.log

# 共享环境变量
CORS_ORIGIN=http://localhost:3000
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```
